---
title: Migraciones de Code First con una base de datos existente - EF6
author: divega
ms.date: 2016-10-23
ms.prod: entity-framework
ms.author: divega
ms.manager: avickers
ms.technology: entity-framework-6
ms.topic: article
ms.assetid: f0cc4f93-67dd-4664-9753-0a9f913814db
caps.latest.revision: 3
ms.openlocfilehash: 77e139a29bb4708b00fc6198a57780ce75197252
ms.sourcegitcommit: bdd06c9a591ba5e6d6a3ec046c80de98f598f3f3
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/10/2018
ms.locfileid: "39122775"
---
# <a name="code-first-migrations-with-an-existing-database"></a><span data-ttu-id="74ce4-102">Migraciones de Code First con una base de datos existente</span><span class="sxs-lookup"><span data-stu-id="74ce4-102">Code First Migrations with an existing database</span></span>
> [!NOTE]
> <span data-ttu-id="74ce4-103">**EF4.3 y versiones posteriores solo** -las características, las API, etc. se describe en esta página se introdujeron en Entity Framework 4.1.</span><span class="sxs-lookup"><span data-stu-id="74ce4-103">**EF4.3 Onwards Only** - The features, APIs, etc. discussed in this page were introduced in Entity Framework 4.1.</span></span> <span data-ttu-id="74ce4-104">Si usa una versión anterior, no se aplica parte o la totalidad de la información.</span><span class="sxs-lookup"><span data-stu-id="74ce4-104">If you are using an earlier version, some or all of the information does not apply.</span></span>

<span data-ttu-id="74ce4-105">En este artículo se describe el uso de migraciones de Code First con una base de datos existente que no fue creado por Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="74ce4-105">This article covers using Code First Migrations with an existing database, one that wasn’t created by Entity Framework.</span></span>

> [!NOTE]
> <span data-ttu-id="74ce4-106">En este artículo se supone que sabe cómo usar migraciones de Code First en escenarios básicos.</span><span class="sxs-lookup"><span data-stu-id="74ce4-106">This article assumes you know how to use Code First Migrations in basic scenarios.</span></span> <span data-ttu-id="74ce4-107">Si no lo hace, necesitará leer [migraciones de Code First](~/ef6/modeling/code-first/migrations/index.md) antes de continuar.</span><span class="sxs-lookup"><span data-stu-id="74ce4-107">If you don’t, then you’ll need to read [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) before continuing.</span></span>

## <a name="screencasts"></a><span data-ttu-id="74ce4-108">Presentaciones en pantalla</span><span class="sxs-lookup"><span data-stu-id="74ce4-108">Screencasts</span></span>

<span data-ttu-id="74ce4-109">Si en su lugar, podría ver una presentación en pantalla que lea este artículo, los siguientes dos vídeos abarcan el mismo contenido que este artículo.</span><span class="sxs-lookup"><span data-stu-id="74ce4-109">If you'd rather watch a screencast than read this article, the following two videos cover the same content as this article.</span></span>

### <a name="video-one-migrations---under-the-hood"></a><span data-ttu-id="74ce4-110">Otra de vídeo: "Migraciones: aspectos técnicos"</span><span class="sxs-lookup"><span data-stu-id="74ce4-110">Video One: "Migrations - Under the Hood"</span></span>

<span data-ttu-id="74ce4-111">[Esta presentación en pantalla](http://channel9.msdn.com/blogs/ef/migrations-under-the-hood) cubre cómo realiza un seguimiento de las migraciones y usa información sobre el modelo para detectar cambios en el modelo.</span><span class="sxs-lookup"><span data-stu-id="74ce4-111">[This screencast](http://channel9.msdn.com/blogs/ef/migrations-under-the-hood) covers how migrations tracks and uses information about the model to detect model changes.</span></span>

### <a name="video-two-migrations---existing-databases"></a><span data-ttu-id="74ce4-112">Dos de vídeo: "Migraciones: bases de datos existentes"</span><span class="sxs-lookup"><span data-stu-id="74ce4-112">Video Two: "Migrations - Existing Databases"</span></span>

<span data-ttu-id="74ce4-113">Creación de los conceptos descritos en el vídeo anterior, [esta presentación en pantalla](http://channel9.msdn.com/blogs/ef/migrations-existing-databases) se explica cómo habilitar y usar las migraciones con una base de datos existente.</span><span class="sxs-lookup"><span data-stu-id="74ce4-113">Building on the concepts from the previous video, [this screencast](http://channel9.msdn.com/blogs/ef/migrations-existing-databases) covers how to enable and use migrations with an existing database.</span></span>

## <a name="step-1-create-a-model"></a><span data-ttu-id="74ce4-114">Paso 1: Crear un modelo</span><span class="sxs-lookup"><span data-stu-id="74ce4-114">Step 1: Create a model</span></span>

<span data-ttu-id="74ce4-115">El primer paso será crear un modelo de Code First que tenga como destino de la base de datos existente.</span><span class="sxs-lookup"><span data-stu-id="74ce4-115">Your first step will be to create a Code First model that targets your existing database.</span></span> <span data-ttu-id="74ce4-116">El [Code First para una base de datos](~/ef6/modeling/code-first/workflows/existing-database.md) tema proporciona instrucciones detalladas sobre cómo hacerlo.</span><span class="sxs-lookup"><span data-stu-id="74ce4-116">The [Code First to an Existing Database](~/ef6/modeling/code-first/workflows/existing-database.md) topic provides detailed guidance on how to do this.</span></span>

>[!NOTE]
> <span data-ttu-id="74ce4-117">Es importante que siga el resto de los pasos descritos en este tema antes de realizar cambios en el modelo que requieran cambios en el esquema de base de datos.</span><span class="sxs-lookup"><span data-stu-id="74ce4-117">It is important to follow the rest of the steps in this topic before making any changes to your model that would require changes to the database schema.</span></span> <span data-ttu-id="74ce4-118">Los pasos siguientes requieren que el modelo de estar sincronizado con el esquema de base de datos.</span><span class="sxs-lookup"><span data-stu-id="74ce4-118">The following steps require the model to be in-sync with the database schema.</span></span>

## <a name="step-2-enable-migrations"></a><span data-ttu-id="74ce4-119">Paso 2: Habilitar migraciones</span><span class="sxs-lookup"><span data-stu-id="74ce4-119">Step 2: Enable Migrations</span></span>

<span data-ttu-id="74ce4-120">El siguiente paso es habilitar migraciones.</span><span class="sxs-lookup"><span data-stu-id="74ce4-120">The next step is to enable migrations.</span></span> <span data-ttu-id="74ce4-121">Puede hacerlo ejecutando el **Enable-Migrations** comando en la consola de administrador de paquetes.</span><span class="sxs-lookup"><span data-stu-id="74ce4-121">You can do this by running the **Enable-Migrations** command in Package Manager Console.</span></span>

<span data-ttu-id="74ce4-122">Este comando se cree una carpeta en la solución llama a las migraciones y colocar una única clase dentro de él llamado configuración.</span><span class="sxs-lookup"><span data-stu-id="74ce4-122">This command will create a folder in your solution called Migrations, and put a single class inside it called Configuration.</span></span> <span data-ttu-id="74ce4-123">La clase de configuración es donde se configuran las migraciones para su aplicación, puede encontrar más información al respecto en el [migraciones de Code First](~/ef6/modeling/code-first/migrations/index.md) tema.</span><span class="sxs-lookup"><span data-stu-id="74ce4-123">The Configuration class is where you configure migrations for your application, you can find out more about it in the [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) topic.</span></span>

## <a name="step-3-add-an-initial-migration"></a><span data-ttu-id="74ce4-124">Paso 3: Agregar una migración inicial</span><span class="sxs-lookup"><span data-stu-id="74ce4-124">Step 3: Add an initial migration</span></span>

<span data-ttu-id="74ce4-125">Una vez que las migraciones se han creado y aplicado a la base de datos local que también puede aplicar estos cambia a otras bases de datos.</span><span class="sxs-lookup"><span data-stu-id="74ce4-125">Once migrations have been created and applied to the local database you may also want to apply these changes to other databases.</span></span> <span data-ttu-id="74ce4-126">Por ejemplo, la base de datos local puede ser una base de datos de prueba y es posible que deseas en última instancia también se aplican los cambios a una base de datos de producción o bases de datos de prueba de otros desarrolladores.</span><span class="sxs-lookup"><span data-stu-id="74ce4-126">For example, your local database may be a test database and you may ultimately want to also apply the changes to a production database and/or other developers test databases.</span></span> <span data-ttu-id="74ce4-127">Hay dos opciones para este paso y lo que debe elegir depende de si el esquema de otras bases de datos está vacío o no actualmente coincide con el esquema de la base de datos local.</span><span class="sxs-lookup"><span data-stu-id="74ce4-127">There are two options for this step and the one you should pick depends whether or not the schema of any other databases is empty or currently matches the schema of the local database.</span></span>

-   <span data-ttu-id="74ce4-128">**Opción uno: Usar un esquema existente como punto de partida.**</span><span class="sxs-lookup"><span data-stu-id="74ce4-128">**Option One: Use existing schema as starting point.**</span></span> <span data-ttu-id="74ce4-129">Debe usar este enfoque cuando otras bases de datos que se aplicarán las migraciones a en el futuro tendrá el mismo esquema que tiene actualmente la base de datos local.</span><span class="sxs-lookup"><span data-stu-id="74ce4-129">You should use this approach when other databases that migrations will be applied to in the future will have the same schema as your local database currently has.</span></span> <span data-ttu-id="74ce4-130">Por ejemplo, se puede utilizar si la base de datos de prueba local actualmente coincide con la versión 1 de la base de datos de producción y posteriormente se aplicarán estas migraciones para actualizar la base de datos de producción a v2.</span><span class="sxs-lookup"><span data-stu-id="74ce4-130">For example, you might use this if your local test database currently matches v1 of your production database and you will later apply these migrations to update your production database to v2.</span></span>
-   <span data-ttu-id="74ce4-131">**Opción dos: Usar la base de datos vacía como punto de partida.**</span><span class="sxs-lookup"><span data-stu-id="74ce4-131">**Option Two: Use empty database as starting point.**</span></span> <span data-ttu-id="74ce4-132">Debe usar este enfoque cuando otras bases de datos que se aplicarán las migraciones a en el futuro están vacíos (o no existe todavía).</span><span class="sxs-lookup"><span data-stu-id="74ce4-132">You should use this approach when other databases that migrations will be applied to in the future are empty (or do not exist yet).</span></span> <span data-ttu-id="74ce4-133">Por ejemplo, podría utilizar si a desarrollar su aplicación con una base de datos de prueba, pero sin usar migraciones y más tarde querrá crear una base de datos de producción desde el principio.</span><span class="sxs-lookup"><span data-stu-id="74ce4-133">For example, you might use this if you started developing your application using a test database but without using migrations and you will later want to create a production database from scratch.</span></span>

### <a name="option-one-use-existing-schema-as-a-starting-point"></a><span data-ttu-id="74ce4-134">Opción uno: Usar un esquema existente como punto de partida</span><span class="sxs-lookup"><span data-stu-id="74ce4-134">Option One: Use existing schema as a starting point</span></span>

<span data-ttu-id="74ce4-135">Migraciones de Code First utiliza una instantánea del modelo que se almacenan en la migración más reciente para detectar cambios en el modelo (puede encontrar información detallada acerca de esto en [migraciones de Code First en entornos de equipo](~/ef6/modeling/code-first/migrations/teams.md)).</span><span class="sxs-lookup"><span data-stu-id="74ce4-135">Code First Migrations uses a snapshot of the model stored in the most recent migration to detect changes to the model (you can find detailed information about this in [Code First Migrations in Team Environments](~/ef6/modeling/code-first/migrations/teams.md)).</span></span> <span data-ttu-id="74ce4-136">Puesto que vamos a suponer que las bases de datos ya tienen el esquema del modelo actual, se generará una migración (inefectiva) vacía que tiene el modelo actual como una instantánea.</span><span class="sxs-lookup"><span data-stu-id="74ce4-136">Since we are going to assume that databases already have the schema of the current model, we will generate an empty (no-op) migration that has the current model as a snapshot.</span></span>

1.  <span data-ttu-id="74ce4-137">Ejecute el **InitialCreate Add-Migration – IgnoreChanges** comando en la consola de administrador de paquetes.</span><span class="sxs-lookup"><span data-stu-id="74ce4-137">Run the **Add-Migration InitialCreate –IgnoreChanges** command in Package Manager Console.</span></span> <span data-ttu-id="74ce4-138">Esto crea una migración vacía con el modelo actual como una instantánea.</span><span class="sxs-lookup"><span data-stu-id="74ce4-138">This creates an empty migration with the current model as a snapshot.</span></span>
2.  <span data-ttu-id="74ce4-139">Ejecute el **Update-Database** comando en la consola de administrador de paquetes.</span><span class="sxs-lookup"><span data-stu-id="74ce4-139">Run the **Update-Database** command in Package Manager Console.</span></span> <span data-ttu-id="74ce4-140">Esto aplicará la migración InitialCreate a la base de datos.</span><span class="sxs-lookup"><span data-stu-id="74ce4-140">This will apply the InitialCreate migration to the database.</span></span> <span data-ttu-id="74ce4-141">Puesto que la migración real no contiene ningún cambio, simplemente agregará una fila a la \_ \_MigrationsHistory tabla que indica que se ha aplicado esta migración.</span><span class="sxs-lookup"><span data-stu-id="74ce4-141">Since the actual migration doesn’t contain any changes, it will simply add a row to the \_\_MigrationsHistory table indicating that this migration has already been applied.</span></span>

### <a name="option-two-use-empty-database-as-a-starting-point"></a><span data-ttu-id="74ce4-142">Opción dos: Usar la base de datos vacía como punto de partida</span><span class="sxs-lookup"><span data-stu-id="74ce4-142">Option Two: Use empty database as a starting point</span></span>

<span data-ttu-id="74ce4-143">En este escenario es necesario que las migraciones para poder crear la base de datos completa desde cero, incluidas las tablas que ya están presentes en nuestra base de datos local.</span><span class="sxs-lookup"><span data-stu-id="74ce4-143">In this scenario we need Migrations to be able to create the entire database from scratch – including the tables that are already present in our local database.</span></span> <span data-ttu-id="74ce4-144">Vamos a generar una migración InitialCreate que incluye la lógica para crear el esquema existente.</span><span class="sxs-lookup"><span data-stu-id="74ce4-144">We’re going to generate an InitialCreate migration that includes logic to create the existing schema.</span></span> <span data-ttu-id="74ce4-145">A continuación, haremos nuestra base de datos existente parezca ya se ha aplicado esta migración.</span><span class="sxs-lookup"><span data-stu-id="74ce4-145">We’ll then make our existing database look like this migration has already been applied.</span></span>

1.  <span data-ttu-id="74ce4-146">Ejecute el **Add-Migration InitialCreate** comando en la consola de administrador de paquetes.</span><span class="sxs-lookup"><span data-stu-id="74ce4-146">Run the **Add-Migration InitialCreate** command in Package Manager Console.</span></span> <span data-ttu-id="74ce4-147">Esto crea una migración para crear el esquema existente.</span><span class="sxs-lookup"><span data-stu-id="74ce4-147">This creates a migration to create the existing schema.</span></span>
2.  <span data-ttu-id="74ce4-148">Comente todo el código en el método de copia de seguridad de la migración recién creado.</span><span class="sxs-lookup"><span data-stu-id="74ce4-148">Comment out all code in the Up method of the newly created migration.</span></span> <span data-ttu-id="74ce4-149">Esto nos permitirá 'Aplicar' la migración a la base de datos local sin intentar volver a crear todas las tablas etc. que ya existen.</span><span class="sxs-lookup"><span data-stu-id="74ce4-149">This will allow us to ‘apply’ the migration to the local database without trying to recreate all the tables etc. that already exist.</span></span>
3.  <span data-ttu-id="74ce4-150">Ejecute el **Update-Database** comando en la consola de administrador de paquetes.</span><span class="sxs-lookup"><span data-stu-id="74ce4-150">Run the **Update-Database** command in Package Manager Console.</span></span> <span data-ttu-id="74ce4-151">Esto aplicará la migración InitialCreate a la base de datos.</span><span class="sxs-lookup"><span data-stu-id="74ce4-151">This will apply the InitialCreate migration to the database.</span></span> <span data-ttu-id="74ce4-152">Puesto que la migración real no contiene los cambios (ya hemos comentado temporalmente marcándolas), simplemente agregará una fila a la \_ \_MigrationsHistory tabla que indica que se ha aplicado esta migración.</span><span class="sxs-lookup"><span data-stu-id="74ce4-152">Since the actual migration doesn’t contain any changes (because we temporarily commented them out), it will simply add a row to the \_\_MigrationsHistory table indicating that this migration has already been applied.</span></span>
4.  <span data-ttu-id="74ce4-153">Quitar los comentarios del código en el método de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="74ce4-153">Un-comment the code in the Up method.</span></span> <span data-ttu-id="74ce4-154">Esto significa que, cuando se aplica esta migración a futuras bases de datos, se creará el esquema que ya existía en la base de datos local por migraciones.</span><span class="sxs-lookup"><span data-stu-id="74ce4-154">This means that when this migration is applied to future databases, the schema that already existed in the local database will be created by migrations.</span></span>

## <a name="things-to-be-aware-of"></a><span data-ttu-id="74ce4-155">Cosas a tener en cuenta</span><span class="sxs-lookup"><span data-stu-id="74ce4-155">Things to be aware of</span></span>

<span data-ttu-id="74ce4-156">Hay algunas cosas que debe tener en cuenta al usar las migraciones en una base de datos existente.</span><span class="sxs-lookup"><span data-stu-id="74ce4-156">There are a few things you need to be aware of when using Migrations against an existing database.</span></span>

### <a name="defaultcalculated-names-may-not-match-existing-schema"></a><span data-ttu-id="74ce4-157">/ Calcula de forma predeterminada los nombres no pueden coincidir con el esquema existente</span><span class="sxs-lookup"><span data-stu-id="74ce4-157">Default/calculated names may not match existing schema</span></span>

<span data-ttu-id="74ce4-158">Cuando aplica la técnica scaffolding las migraciones, migraciones especifica explícitamente los nombres de columnas y tablas.</span><span class="sxs-lookup"><span data-stu-id="74ce4-158">Migrations explicitly specifies names for columns and tables when it scaffolds a migrations.</span></span> <span data-ttu-id="74ce4-159">Sin embargo, hay otros objetos de base de datos que las migraciones se calcula un nombre predeterminado para al aplicar las migraciones.</span><span class="sxs-lookup"><span data-stu-id="74ce4-159">However, there are other database objects that Migrations calculates a default name for when applying the migrations.</span></span> <span data-ttu-id="74ce4-160">Esto incluye los índices y restricciones de clave externa.</span><span class="sxs-lookup"><span data-stu-id="74ce4-160">This includes indexes and foreign key constraints.</span></span> <span data-ttu-id="74ce4-161">Cuando el destino es un esquema existente, estos nombres calculados pueden no coincidir con lo que realmente existe en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="74ce4-161">When targeting an existing schema, these calculated names may not match what actually exists in your database.</span></span>

<span data-ttu-id="74ce4-162">Estos son algunos ejemplos de cuando deba tener en cuenta esto:</span><span class="sxs-lookup"><span data-stu-id="74ce4-162">Here are some examples of when you need to be aware of this:</span></span>

<span data-ttu-id="74ce4-163">**Si ha utilizado ' una opción: usar un esquema existente como punto de partida ' del paso 3:**</span><span class="sxs-lookup"><span data-stu-id="74ce4-163">**If you used ‘Option One: Use existing schema as a starting point’ from Step 3:**</span></span>

-   <span data-ttu-id="74ce4-164">Si los cambios futuros en el modelo necesitan cambiar o quitar uno de los objetos de base de datos que es un nombre diferente, deberá modificar la migración con scaffold para especificar el nombre correcto.</span><span class="sxs-lookup"><span data-stu-id="74ce4-164">If future changes in your model require changing or dropping one of the database objects that is named differently, you will need to modify the scaffolded migration to specify the correct name.</span></span> <span data-ttu-id="74ce4-165">Las API de migraciones tienen un parámetro de nombre opcional que le permite hacer esto.</span><span class="sxs-lookup"><span data-stu-id="74ce4-165">The Migrations APIs have an optional Name parameter that allows you to do this.</span></span>
    <span data-ttu-id="74ce4-166">Por ejemplo, el esquema existente puede tener una tabla de entrada con una columna de clave externa de BlogId que tiene un índice llamado IndexFk\_BlogId.</span><span class="sxs-lookup"><span data-stu-id="74ce4-166">For example, your existing schema may have a Post table with a BlogId foreign key column that has an index named IndexFk\_BlogId.</span></span> <span data-ttu-id="74ce4-167">Sin embargo, de forma predeterminada las migraciones esperaría este índice se denomine IX\_BlogId.</span><span class="sxs-lookup"><span data-stu-id="74ce4-167">However, by default Migrations would expect this index to be named IX\_BlogId.</span></span> <span data-ttu-id="74ce4-168">Si realiza un cambio en el modelo que da como resultado la eliminación de este índice, deberá modificar la técnica scaffolding llamada DropIndex para especificar el IndexFk\_BlogId nombre.</span><span class="sxs-lookup"><span data-stu-id="74ce4-168">If you make a change to your model that results in dropping this index, you will need to modify the scaffolded DropIndex call to specify the IndexFk\_BlogId name.</span></span>

<span data-ttu-id="74ce4-169">**Si ha utilizado ' opción dos: usar base de datos vacío como punto de partida ' del paso 3:**</span><span class="sxs-lookup"><span data-stu-id="74ce4-169">**If you used ‘Option Two: Use empty database as a starting point’ from Step 3:**</span></span>

-   <span data-ttu-id="74ce4-170">Puede producir un error al intentar ejecutar el método abajo de la migración inicial (es decir, es, a una base de datos vacía) en la base de datos local porque las migraciones intentará quitar índices y restricciones de clave externa con los nombres incorrectos.</span><span class="sxs-lookup"><span data-stu-id="74ce4-170">Trying to run the Down method of the initial migration (that is, reverting to an empty database) against your local database may fail because Migrations will try to drop indexes and foreign key constraints using the incorrect names.</span></span> <span data-ttu-id="74ce4-171">Esto solo afectará su base de datos local desde otras bases de datos se creará desde cero mediante el método de copia de seguridad de la migración inicial.</span><span class="sxs-lookup"><span data-stu-id="74ce4-171">This will only affect your local database since other databases will be created from scratch using the Up method of the initial migration.</span></span>
    <span data-ttu-id="74ce4-172">Si desea cambiar la base de datos local existente en un estado vacío es más fácil hacerlo manualmente, ya sea quitando la base de datos o quitar todas las tablas.</span><span class="sxs-lookup"><span data-stu-id="74ce4-172">If you want to downgrade your existing local database to an empty state it is easiest to do this manually, either by dropping the database or dropping all the tables.</span></span> <span data-ttu-id="74ce4-173">Después de este cambio inicial que se volverá a todos los objetos de base de datos con los nombres predeterminados, por lo que este problema no presentará propio nuevo.</span><span class="sxs-lookup"><span data-stu-id="74ce4-173">After this initial downgrade all database objects will be recreated with the default names, so this issue will not present itself again.</span></span>
-   <span data-ttu-id="74ce4-174">Si los cambios futuros en el modelo necesitan cambiar o quitar uno de los objetos de base de datos que es un nombre diferente, esto no funcionará en la base de datos local existente: puesto que los nombres no coinciden con los valores predeterminados.</span><span class="sxs-lookup"><span data-stu-id="74ce4-174">If future changes in your model require changing or dropping one of the database objects that is named differently, this will not work against your existing local database – since the names won’t match the defaults.</span></span> <span data-ttu-id="74ce4-175">Sin embargo, funcionará en bases de datos que se crearon 'desde el principio', ya que habrá utilizaban los nombres predeterminados elegidos por migraciones.</span><span class="sxs-lookup"><span data-stu-id="74ce4-175">However, it will work against databases that were created ‘from scratch’ since they will have used the default names chosen by Migrations.</span></span>
    <span data-ttu-id="74ce4-176">Se podría realizar estas modificaciones manualmente en la base de datos local existente, o considere la opción de migraciones de volver a crear la base de datos desde cero: igual que en otras máquinas.</span><span class="sxs-lookup"><span data-stu-id="74ce4-176">You could either make these changes manually on your local existing database, or consider having Migrations recreate your database from scratch – as it will on other machines.</span></span>
-   <span data-ttu-id="74ce4-177">Bases de datos creadas mediante el método de copia de seguridad de la migración inicial pueden diferir ligeramente de la base de datos local desde los nombres predeterminados calculados para los índices y restricciones de clave externa que se usará.</span><span class="sxs-lookup"><span data-stu-id="74ce4-177">Databases created using the Up method of your initial migration may differ slightly from the local database since the calculated default names for indexes and foreign key constraints will be used.</span></span> <span data-ttu-id="74ce4-178">Es posible que también terminará con índices adicionales como las migraciones creará los índices en columnas de clave externa de forma predeterminada, esto puede no haber sido el caso de la base de datos local original.</span><span class="sxs-lookup"><span data-stu-id="74ce4-178">You may also end up with extra indexes as Migrations will create indexes on foreign key columns by default – this may not have been the case in your original local database.</span></span>

### <a name="not-all-database-objects-are-represented-in-the-model"></a><span data-ttu-id="74ce4-179">No todos los objetos de base de datos se representan en el modelo</span><span class="sxs-lookup"><span data-stu-id="74ce4-179">Not all database objects are represented in the model</span></span>

<span data-ttu-id="74ce4-180">No se controlarán los objetos de base de datos que no forman parte del modelo mediante migraciones.</span><span class="sxs-lookup"><span data-stu-id="74ce4-180">Database objects that are not part of your model will not be handled by Migrations.</span></span> <span data-ttu-id="74ce4-181">Esto puede incluir vistas, procedimientos almacenados, los permisos, las tablas que no forman parte de su modelo, los índices adicionales, etc.</span><span class="sxs-lookup"><span data-stu-id="74ce4-181">This can include views, stored procedures, permissions, tables that are not part of your model, additional indexes, etc.</span></span>

<span data-ttu-id="74ce4-182">Estos son algunos ejemplos de cuando deba tener en cuenta esto:</span><span class="sxs-lookup"><span data-stu-id="74ce4-182">Here are some examples of when you need to be aware of this:</span></span>

-   <span data-ttu-id="74ce4-183">Independientemente de la opción que eligió en el 'Paso 3,' si los cambios futuros en el modelo necesitan cambiar o quitar estos objetos adicionales que para realizar estos cambios no sabrá migraciones.</span><span class="sxs-lookup"><span data-stu-id="74ce4-183">Regardless of the option you chose in ‘Step 3’, if future changes in your model require changing or dropping these additional objects Migrations will not know to make these changes.</span></span> <span data-ttu-id="74ce4-184">Por ejemplo, si quita una columna que tiene un índice adicional en ella, las migraciones no sabrá para quitar el índice.</span><span class="sxs-lookup"><span data-stu-id="74ce4-184">For example, if you drop a column that has an additional index on it, Migrations will not know to drop the index.</span></span> <span data-ttu-id="74ce4-185">Deberá agregarlo manualmente a la migración con scaffolding.</span><span class="sxs-lookup"><span data-stu-id="74ce4-185">You will need to manually add this to the scaffolded Migration.</span></span>
-   <span data-ttu-id="74ce4-186">Si ha utilizado ' opción dos: usar base de datos vacío como punto de partida ', estos objetos adicionales no se creará el método de copia de seguridad de la migración inicial.</span><span class="sxs-lookup"><span data-stu-id="74ce4-186">If you used ‘Option Two: Use empty database as a starting point’, these additional objects will not be created by the Up method of your initial migration.</span></span>
    <span data-ttu-id="74ce4-187">Puede modificar arriba y hacia abajo de los métodos que se encargue de estos objetos adicionales si lo desea.</span><span class="sxs-lookup"><span data-stu-id="74ce4-187">You can modify the Up and Down methods to take care of these additional objects if you wish.</span></span> <span data-ttu-id="74ce4-188">Para los objetos que no se admiten de forma nativa en la API de migraciones – como vistas: puede usar el [Sql](https://msdn.microsoft.com/library/system.data.entity.migrations.dbmigration.sql.aspx) método para ejecutar SQL sin procesar para crear y colocar de ellos.</span><span class="sxs-lookup"><span data-stu-id="74ce4-188">For objects that are not natively supported in the Migrations API – such as views – you can use the [Sql](https://msdn.microsoft.com/library/system.data.entity.migrations.dbmigration.sql.aspx) method to run raw SQL to create/drop them.</span></span>
